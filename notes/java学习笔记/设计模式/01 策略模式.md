# ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰å®Œå…¨è§£æ

## ä¸€ã€ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ï¼Ÿ

ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§**è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼**ï¼Œå®ƒå®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä¸”ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ç«¯ã€‚

ğŸŒ° **ç”Ÿæ´»æ¯”å–»**ï¼š
æƒ³è±¡ä½ è¦å»æ—…è¡Œï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„äº¤é€šå·¥å…·ï¼ˆç­–ç•¥ï¼‰ï¼š

- è‡ªè¡Œè½¦ï¼ˆç¯ä¿ä½†æ…¢ï¼‰
- æ±½è½¦ï¼ˆå¿«ä½†è´µï¼‰ 
- å…¬äº¤è½¦ï¼ˆä¾¿å®œä½†æ‹¥æŒ¤ï¼‰
æ¯ç§äº¤é€šæ–¹å¼éƒ½æ˜¯ä¸€ç§"ç­–ç•¥"ï¼Œä½ å¯ä»¥æ ¹æ®æƒ…å†µè‡ªç”±é€‰æ‹©ï¼Œè€Œæ—…è¡Œçš„ç›®çš„åœ°ï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸ä¼šå› ä¸ºä½ çš„é€‰æ‹©è€Œæ”¹å˜ã€‚

## äºŒã€ç­–ç•¥æ¨¡å¼çš„ä¸‰è¦ç´ 

### 1. ç­–ç•¥æ¥å£ï¼ˆStrategy Interfaceï¼‰
```java
public interface TravelStrategy {
    void goToDestination();
}
```

### 2. å…·ä½“ç­–ç•¥ç±»ï¼ˆConcrete Strategiesï¼‰
```java
public class BikeStrategy implements TravelStrategy {
    @Override
    public void goToDestination() {
        System.out.println("éª‘è‡ªè¡Œè½¦å»ç›®çš„åœ°ï¼Œè€—æ—¶60åˆ†é’Ÿ");
    }
}

public class CarStrategy implements TravelStrategy {
    @Override
    public void goToDestination() {
        System.out.println("å¼€è½¦å»ç›®çš„åœ°ï¼Œè€—æ—¶20åˆ†é’Ÿ");
    }
}
```

### 3. ä¸Šä¸‹æ–‡ç±»ï¼ˆContextï¼‰
```java
public class Traveler {
    private TravelStrategy strategy;
    
    public void setStrategy(TravelStrategy strategy) {
        this.strategy = strategy;
    }
    
    public void travel() {
        strategy.goToDestination();
    }
}
```



## ä¸‰ã€ä»£ç ç¤ºèŒƒ

```java
// 1. ç­–ç•¥æ¥å£
public interface PaymentStrategy {
    void pay(int amount);
}

// 2. å…·ä½“ç­–ç•¥
public class CreditCardStrategy implements PaymentStrategy {
    private String cardNumber;
    
    public CreditCardStrategy(String cardNumber) {
        this.cardNumber = cardNumber;
    }
    
    @Override
    public void pay(int amount) {
        System.out.println(amount + "å…ƒï¼Œä½¿ç”¨ä¿¡ç”¨å¡æ”¯ä»˜ï¼Œå¡å·ï¼š" + cardNumber);
    }
}

public class AlipayStrategy implements PaymentStrategy {
    @Override
    public void pay(int amount) {
        System.out.println(amount + "å…ƒï¼Œä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜");
    }
}

// 3. ä¸Šä¸‹æ–‡ç±»
public class ShoppingCart {
    private PaymentStrategy strategy;
    
    public void setPaymentStrategy(PaymentStrategy strategy) {
        this.strategy = strategy;
    }
    
    public void checkout(int amount) {
        strategy.pay(amount);
    }
}

// 4. å®¢æˆ·ç«¯ä½¿ç”¨
public class Client {
    public static void main(String[] args) {
        ShoppingCart cart = new ShoppingCart();
        
        // ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜
        cart.setPaymentStrategy(new AlipayStrategy());
        cart.checkout(100);
        
        // åˆ‡æ¢ä¸ºä¿¡ç”¨å¡æ”¯ä»˜
        cart.setPaymentStrategy(new CreditCardStrategy("1234-5678"));
        cart.checkout(200);
    }
}
```

## äº”ã€ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹

1. **å¼€é—­åŸåˆ™**ï¼šæ— éœ€ä¿®æ”¹ä¸Šä¸‹æ–‡å³å¯æ·»åŠ æ–°ç­–ç•¥
2. **æ¶ˆé™¤æ¡ä»¶è¯­å¥**ï¼šæ›¿ä»£å¤§é‡çš„if-elseæˆ–switch-case
3. **æé«˜å¯æ‰©å±•æ€§**ï¼šæ–°ç­–ç•¥æ˜“äºæ·»åŠ 
4. **ç®—æ³•å¤ç”¨**ï¼šä¸åŒä¸Šä¸‹æ–‡å¯ä»¥å…±äº«ç­–ç•¥

## å…­ã€ç­–ç•¥æ¨¡å¼ vs çŠ¶æ€æ¨¡å¼

| ç‰¹æ€§     | ç­–ç•¥æ¨¡å¼             | çŠ¶æ€æ¨¡å¼                   |
| -------- | -------------------- | -------------------------- |
| ç›®çš„     | çµæ´»æ›¿æ¢ç®—æ³•         | å¯¹è±¡å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜è¡Œä¸º |
| åˆ‡æ¢æ§åˆ¶ | å®¢æˆ·ç«¯æ§åˆ¶           | çŠ¶æ€ç±»è‡ªèº«æ§åˆ¶             |
| åº”ç”¨åœºæ™¯ | æ”¯ä»˜æ–¹å¼ã€æ’åºç®—æ³•ç­‰ | è®¢å•çŠ¶æ€ã€å·¥ä½œæµç¨‹ç­‰       |

## ä¸ƒã€å®é™…åº”ç”¨åœºæ™¯

1. **æ”¯ä»˜ç³»ç»Ÿ**ï¼šæ”¯ä»˜å®/å¾®ä¿¡/ä¿¡ç”¨å¡ç­‰æ”¯ä»˜æ–¹å¼
2. **æ¸¸æˆå¼€å‘**ï¼šä¸åŒè§’è‰²çš„æ”»å‡»ç­–ç•¥
3. **æ’åºç®—æ³•**ï¼šå¿«é€Ÿæ’åº/å½’å¹¶æ’åº/å†’æ³¡æ’åºç­‰åˆ‡æ¢
4. **å¯¼èˆªç³»ç»Ÿ**ï¼šå¤šç§è·¯å¾„è§„åˆ’ç®—æ³•
5. **æŠ˜æ‰£ç³»ç»Ÿ**ï¼šä¼šå‘˜æŠ˜æ‰£/æ»¡å‡/ä¿ƒé”€ç­‰ä¸åŒè®¡ç®—ç­–ç•¥

## å…«ã€é¢è¯•å¸¸è§é—®é¢˜

### Q1ï¼šç­–ç•¥æ¨¡å¼å’Œå·¥å‚æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**ç­”**ï¼š
- å·¥å‚æ¨¡å¼å…³æ³¨**å¯¹è±¡åˆ›å»º**
- ç­–ç•¥æ¨¡å¼å…³æ³¨**è¡Œä¸ºå°è£…**
- å¸¸ç»„åˆä½¿ç”¨ï¼šå·¥å‚åˆ›å»ºå…·ä½“çš„ç­–ç•¥å¯¹è±¡

### Q2ï¼šä»€ä¹ˆæƒ…å†µä¸‹ä¸åº”è¯¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Ÿ
**ç­”**ï¼š
1. å¦‚æœåªæœ‰1-2ç§ç®—æ³•ä¸”å¾ˆå°‘å˜åŒ–
2. å¦‚æœç®—æ³•éœ€è¦è®¿é—®ä¸Šä¸‹æ–‡å†…éƒ¨çŠ¶æ€
3. å®¢æˆ·ç«¯éœ€è¦çŸ¥é“å…·ä½“ç­–ç•¥çš„å®ç°ç»†èŠ‚æ—¶

## ä¹ã€æœ€ä½³å®è·µå»ºè®®

1. **ä½¿ç”¨æšä¸¾ç®€åŒ–ç­–ç•¥é€‰æ‹©**ï¼š
```java
public enum TransportType {
    BIKE(new BikeStrategy()),
    CAR(new CarStrategy());
    
    private TravelStrategy strategy;
    
    TransportType(TravelStrategy strategy) {
        this.strategy = strategy;
    }
    
    public TravelStrategy getStrategy() {
        return strategy;
    }
}
```

2. **ç»“åˆSpringä½¿ç”¨**ï¼š
```java
@Service
public class PaymentService {
    private Map<String, PaymentStrategy> strategies;
    
    // Springä¼šè‡ªåŠ¨æ³¨å…¥æ‰€æœ‰å®ç°PaymentStrategyçš„Bean
    public PaymentService(List<PaymentStrategy> strategyList) {
        strategies = strategyList.stream()
            .collect(Collectors.toMap(
                s -> s.getClass().getSimpleName(),
                Function.identity()
            ));
    }
    
    public void pay(String strategyName, int amount) {
        strategies.get(strategyName).pay(amount);
    }
}
```

3. **Lambdaè¡¨è¾¾å¼ç®€åŒ–**ï¼ˆJava8+ï¼‰ï¼š
```java
public class Calculator {
    private BinaryOperator<Integer> strategy;
    
    public void setStrategy(BinaryOperator<Integer> strategy) {
        this.strategy = strategy;
    }
    
    public int calculate(int a, int b) {
        return strategy.apply(a, b);
    }
}

// ä½¿ç”¨
Calculator calc = new Calculator();
calc.setStrategy((a, b) -> a + b); // åŠ æ³•ç­–ç•¥
calc.setStrategy((a, b) -> a * b); // ä¹˜æ³•ç­–ç•¥
```